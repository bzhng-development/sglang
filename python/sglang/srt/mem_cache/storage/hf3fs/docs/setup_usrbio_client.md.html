<h1 id="hicachehf3fs-setup">HiCacheHF3FS Setup</h1>
<h2 id="build-package">Build &amp; Package</h2>
<h3 id="source-code">Source Code</h3>
<p>https://github.com/deepseek-ai/3FS/blob/main/README.md#check-out-source-code</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="fu">git</span> clone https://github.com/deepseek-ai/3fs</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a><span class="bu">cd</span> 3fs</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a><span class="fu">git</span> submodule update --init --recursive</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a><span class="ex">./patches/apply.sh</span></span></code></pre></div>
<h3 id="build-dev-container">Build Dev Container</h3>
<p>https://github.com/deepseek-ai/3FS/blob/main/dockerfile/dev.dockerfile</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="bu">cd</span> 3fs/dockerfile</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="ex">docker</span> build -t hf3fs:dev -f dev.dockerfile .</span></code></pre></div>
<h3 id="generate-python-wheel">Generate Python Wheel</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="ex">docker</span> run -it hf3fs:dev bash</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a><span class="co"># Inside the development container</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a><span class="fu">git</span> clone https://github.com/deepseek-ai/3fs</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a><span class="bu">cd</span> 3fs</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a><span class="fu">git</span> submodule update --init --recursive</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a><span class="ex">./patches/apply.sh</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a><span class="ex">apt-get</span> update <span class="kw">\</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a><span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> install -y --no-install-recommends <span class="kw">\</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true"></a><span class="ex">python3</span> python3-pip <span class="kw">\</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true"></a><span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> clean <span class="kw">\</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true"></a><span class="kw">&amp;&amp;</span> <span class="fu">rm</span> -rf /var/lib/apt/lists/*</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true"></a><span class="co"># apt install python3.12 python3.12-venv python3.12-dev</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true"></a><span class="co"># curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true"></a><span class="co"># python3.12 get-pip.py</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true"></a><span class="co"># Generated wheel location: dist/hf3fs_py_usrbio-1.2.9+2db69ce-cp310-cp310-linux_x86_64.whl</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true"></a><span class="ex">python3</span> setup.py bdist_wheel</span></code></pre></div>
<h2 id="installation">Installation</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="co"># Install Dependencies</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="co"># https://github.com/deepseek-ai/3FS/blob/main/dockerfile/dev.dockerfile</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a><span class="ex">apt</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apt</span> install -y                            <span class="kw">\</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>  <span class="ex">libaio-dev</span>                                            <span class="kw">\</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>  <span class="ex">libboost-all-dev</span>                                      <span class="kw">\</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>  <span class="ex">libdouble-conversion-dev</span>                              <span class="kw">\</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a>  <span class="ex">libdwarf-dev</span>                                          <span class="kw">\</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a>  <span class="ex">libgflags-dev</span>                                         <span class="kw">\</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a>  <span class="ex">libgmock-dev</span>                                          <span class="kw">\</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true"></a>  <span class="ex">libgoogle-glog-dev</span>                                    <span class="kw">\</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true"></a>  <span class="ex">libgoogle-perftools-dev</span>                               <span class="kw">\</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true"></a>  <span class="ex">libgtest-dev</span>                                          <span class="kw">\</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true"></a>  <span class="ex">liblz4-dev</span>                                            <span class="kw">\</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true"></a>  <span class="ex">liblzma-dev</span>                                           <span class="kw">\</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true"></a>  <span class="ex">libssl-dev</span>                                            <span class="kw">\</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true"></a>  <span class="ex">libunwind-dev</span>                                         <span class="kw">\</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true"></a>  <span class="ex">libuv1-dev</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true"></a></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true"></a><span class="co"># Install Python Package</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true"></a><span class="ex">pip</span> install hf3fs_py_usrbio-1.2.9+394583d-cp312-cp312-linux_x86_64.whl</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true"></a><span class="bu">export</span> <span class="va">LD_LIBRARY_PATH=$LD_LIBRARY_PATH</span>:/usr/local/lib/python3.12/dist-packages</span></code></pre></div>
