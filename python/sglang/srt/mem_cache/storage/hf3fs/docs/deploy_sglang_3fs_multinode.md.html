<h1 id="startup-3fs-metadata-service">1. Startup 3fs metadata service</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="fu">nohup</span> python3 -m sglang.srt.mem_cache.storage.hf3fs.mini_3fs_metadata_server <span class="op">&gt;</span> meta.out <span class="kw">&amp;</span></span></code></pre></div>
<h1 id="startup-sglang-engine">2. Startup sglang engine</h1>
<h2 id="hf3fs-configures">HF3fs configures</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="ex">vim</span> /sgl-workspace/sglang/benchmark/hf3fs/hf3fs_config.json</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="kw">{</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>    <span class="st">&quot;file_path_prefix&quot;</span>: <span class="st">&quot;/data/hicache&quot;</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a>    <span class="st">&quot;file_size&quot;</span>: <span class="ex">1099511627776</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>    <span class="st">&quot;numjobs&quot;</span>: <span class="ex">16</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>    <span class="st">&quot;entries&quot;</span>: <span class="ex">8</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a>    <span class="st">&quot;metadata_server_url&quot;</span>: <span class="st">&quot;http://metaServerIp:18000&quot;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div>
<h2 id="node1">node1</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="bu">export</span> <span class="va">SGLANG_HICACHE_HF3FS_CONFIG_PATH=</span>/sgl-workspace/sglang/benchmark/hf3fs/hf3fs_config.json</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="bu">export</span> <span class="va">LD_LIBRARY_PATH=$LD_LIBRARY_PATH</span>:/usr/local/lib/python3.12/dist-packages</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a><span class="fu">rm</span> -rf instance1.out <span class="kw">&amp;&amp;</span> <span class="kw">\</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a><span class="fu">nohup</span> python3 -m sglang.launch_server <span class="kw">\</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>    <span class="ex">--model-path</span> /code/models/Qwen3-32B/ <span class="kw">\</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a>    <span class="ex">--host</span> 0.0.0.0 --port 10000 <span class="kw">\</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a>    <span class="ex">--page-size</span> 64 <span class="kw">\</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a>    <span class="ex">--enable-hierarchical-cache</span> <span class="kw">\</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a>    <span class="ex">--hicache-ratio</span> 2 --hicache-size 0 <span class="kw">\</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a>    <span class="ex">--hicache-write-policy</span> write_through <span class="kw">\</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a>    <span class="ex">--hicache-storage-backend</span> hf3fs --tp 2 <span class="op">&gt;</span> instance1.out <span class="kw">&amp;</span></span></code></pre></div>
<h2 id="node2">node2</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="bu">export</span> <span class="va">SGLANG_HICACHE_HF3FS_CONFIG_PATH=</span>/sgl-workspace/sglang/benchmark/hf3fs/hf3fs_config.json</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="bu">export</span> <span class="va">LD_LIBRARY_PATH=$LD_LIBRARY_PATH</span>:/usr/local/lib/python3.12/dist-packages</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a><span class="fu">rm</span> -rf instance2.out <span class="kw">&amp;&amp;</span> <span class="kw">\</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a><span class="fu">nohup</span> python3 -m sglang.launch_server <span class="kw">\</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>    <span class="ex">--model-path</span> /code/models/Qwen3-32B/ <span class="kw">\</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>    <span class="ex">--host</span> 0.0.0.0 --port 10000 <span class="kw">\</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a>    <span class="ex">--page-size</span> 64 <span class="kw">\</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a>    <span class="ex">--enable-hierarchical-cache</span> <span class="kw">\</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a>    <span class="ex">--hicache-ratio</span> 2 --hicache-size 0 <span class="kw">\</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true"></a>    <span class="ex">--hicache-write-policy</span> write_through <span class="kw">\</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true"></a>    <span class="ex">--hicache-storage-backend</span> hf3fs --tp 2 <span class="op">&gt;</span> instance2.out <span class="kw">&amp;</span></span></code></pre></div>
<h1 id="startup-router">3. Startup router</h1>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="fu">rm</span> -rf router.out <span class="kw">&amp;&amp;</span> <span class="kw">\</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="fu">nohup</span> python -m sglang_router.launch_router --worker-urls http://node1:10000 http://node2:10000 <span class="op">&gt;</span> router.out <span class="kw">&amp;</span></span></code></pre></div>
<h1 id="startup-multiturn-benchmark">4. Startup multiturn benchmark</h1>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="fu">rm</span> -rf bench_multiturn.out <span class="kw">&amp;&amp;</span> <span class="kw">\</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a><span class="fu">nohup</span> python3 benchmark/hicache/bench_multiturn.py <span class="kw">\</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a>    <span class="ex">--model-path</span> /code/models/Qwen3-32B <span class="kw">\</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a>    <span class="ex">--dataset-path</span> /code/models/ShareGPT_V3_unfiltered_cleaned_split.json <span class="kw">\</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a>    <span class="ex">--port</span> 30000 <span class="kw">\</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true"></a>    <span class="ex">--request-length</span> 2048 --num-clients 512 --num-rounds 5 --max-parallel 8 <span class="kw">\</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true"></a>    <span class="op">&gt;</span> <span class="ex">bench_multiturn.out</span> <span class="kw">&amp;</span></span></code></pre></div>
