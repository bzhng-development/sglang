================================================================================
FUNCTION INDEX: mooncake module
================================================================================
Total Functions: 49
Documented: 9


============================================================
FILE: python/sglang/srt/disaggregation/mooncake/conn.py
Functions: 40
============================================================


CLASS: AuxDataCodec
----------------------------------------
  L 146: serialize_data_from_buffer(src_addr, data_length)
         📝 Serialize data from memory buffer to bytes

  L 152: deserialize_data_to_buffer(kv_args, buffer_index, aux_index, data)
         📝 Deserialize bytes into target memory buffer


CLASS: KVArgsRegisterInfo
----------------------------------------
  L 128: from_zmq(cls, msg: List[bytes])


CLASS: KVTransferError
----------------------------------------
  L  61: __init__(self, bootstrap_room: int, failure_reason: str)

  L  66: __str__(self)


CLASS: MooncakeKVBootstrapServer
----------------------------------------
  L1548: __init__(self, port: int)

  L1565: run(self)

  L1686: close(self)
         📝 Shutdown

  L1696: poll(self)
         → KVPoll


CLASS: MooncakeKVManager
----------------------------------------
  L 165: __init__(self, args: KVArgs, disaggregation_mode: DisaggregationMode, server_args: ServerArgs, is_mla_backend: Optional[bool])

  L 277: init_engine(self)

  L 284: register_buffer_to_engine(self)

  L 314: send_kvcache(self, mooncake_session_id: str, prefill_kv_indices: npt.NDArray[np.int32], dst_kv_ptrs: list[int], dst_kv_indices: npt.NDArray[np.int32], executor: concurrent.futures.ThreadPoolExecutor)

  L 419: send_kvcache_slice(self, mooncake_session_id: str, prefill_kv_indices: npt.NDArray[np.int64], dst_kv_ptrs: list[int], dst_kv_indices: npt.NDArray[np.int64], dst_tp_rank: int, dst_attn_tp_size: int, dst_kv_item_len: int, executor: concurrent.futures.ThreadPoolExecutor)
         📝 Sends KV cache slices from this Prefill rank to a target Decode rank,

  L 583: send_aux(self, req: TransferInfo, prefill_aux_index: int, dst_aux_ptrs: list[int])

  L 605: send_aux_tcp(self, req: TransferInfo, prefill_aux_index: int, dst_aux_ptrs: list[int])

  L 630: send_aux_data_to_endpoint(self, remote: str, dst_port: int, room: int, buffer_index: int, aux_index: int, data: bytes)

  L 654: sync_status_to_decode_endpoint(self, remote: str, dst_port: int, room: int, status: int, prefill_rank: int)

  L 667: transfer_worker(self, queue: FastQueue, executor: concurrent.futures.ThreadPoolExecutor)

  L 805: start_prefill_thread(self)

  L 864: start_decode_thread(self)

  L 955: add_transfer_request(self, bootstrap_room: int, kv_indices: npt.NDArray[np.int32], index_slice: slice, is_last: bool, aux_index: Optional[int])

  L 998: check_status(self, bootstrap_room: int)

  L1001: update_status(self, bootstrap_room: int, status: KVPoll)

  L1013: record_failure(self, bootstrap_room: int, failure_reason: str)

  L1017: get_session_id(self)


CLASS: MooncakeKVReceiver
----------------------------------------
  L1207: __init__(self, mgr: MooncakeKVManager, bootstrap_addr: str, bootstrap_room: Optional[int], data_parallel_rank: Optional[int])

  L1470: init(self, kv_indices: npt.NDArray[np.int32], aux_index: Optional[int])

  L1489: poll(self)
         → KVPoll

  L1515: clear(self)
         → None

  L1525: failure_exception(self)

  L1538: abort(self)


CLASS: MooncakeKVSender
----------------------------------------
  L1103: __init__(self, mgr: MooncakeKVManager, bootstrap_addr: str, bootstrap_room: int, dest_tp_ranks: List[int], pp_rank: int)

  L1121: init(self, num_kv_indices: int, aux_index: Optional[int])

  L1125: send(self, kv_indices: npt.NDArray[np.int32])

  L1149: poll(self)
         → KVPoll

  L1175: clear(self)
         → None

  L1179: failure_exception(self)

  L1192: abort(self)


CLASS: TransferInfo
----------------------------------------
  L  93: from_zmq(cls, msg: List[bytes])


============================================================
FILE: python/sglang/srt/disaggregation/mooncake/transfer_engine.py
Functions: 9
============================================================


CLASS: MooncakeTransferEngine
----------------------------------------
  L  11: __init__(self, hostname: str, gpu_id: int, ib_device: Optional[str])

  L  34: register(self, ptr, length)

  L  44: deregister(self, ptr)

  L  54: batch_register(self, ptrs: List[int], lengths: List[int])
         → int
         📝 Batch register multiple memory regions.

  L  71: batch_deregister(self, ptrs: List[int])
         → int
         📝 Batch deregister multiple memory regions.

  L  83: initialize(self, hostname: str, device_name: Optional[str])
         → None
         📝 Initialize the mooncake instance.

  L 108: transfer_sync(self, session_id: str, buffer: int, peer_buffer_address: int, length: int)
         → int
         📝 Synchronously transfer data to the specified address.

  L 133: batch_transfer_sync(self, session_id: str, buffers: List[int], peer_buffer_addresses: List[int], lengths: List[int])
         → int
         📝 Synchronously transfer data to the specified addresses in batches.

  L 163: get_session_id(self)
