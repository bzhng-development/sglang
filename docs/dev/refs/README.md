# SGLang API Reference Documentation

This directory contains generated API reference documentation and code analysis tools for SGLang.

## Directory Structure

```
docs/dev/refs/
├── README.md                    # This file
├── API_DOCUMENTATION_WORKFLOW.md  # Complete workflow documentation
├── api/                         # Generated API documentation (pdoc3)
│   ├── sglang/                 # Main module documentation
│   │   ├── index.html          # Module index
│   │   ├── lang/               # Language API
│   │   ├── srt/                # SRT runtime API
│   │   └── ...                 # Other modules
│   ├── index.html              # API documentation index
│   ├── search.js               # Search functionality
│   └── sglang.html             # Main module overview
└── code-index/                 # Function analysis and indexing
    ├── function-index.json     # Complete function metadata
    ├── function-index-min.txt  # Minimal format with types
    ├── function-index-readable.txt # Human-readable format
    ├── coverage.json           # Coverage metrics (JSON)
    └── coverage.md             # Coverage report (Markdown)
```

## Quick Start

### Generate API Documentation

```bash
cd docs

# Install dependencies
pip install -e ../python/
pip install pdoc3

# Generate clean API docs
rm -rf dev/refs/api
pdoc3 --html --output-dir dev/refs/api --skip-errors sglang

# View documentation
open dev/refs/api/sglang/index.html
```

### Generate Function Index

```bash
cd docs

# Generate function analysis
python3 ../tools/devdocs/function_index/generate_function_index.py

# View outputs
cat dev/refs/code-index/coverage.md              # Coverage summary
head -50 dev/refs/code-index/function-index-min.txt  # Function signatures
```

## Documentation Types

### 1. API Documentation (`api/`)
- **Generated by**: pdoc3
- **Content**: Complete HTML documentation with docstrings
- **Features**: Interactive search, cross-references, source links
- **Best for**: API reference, exploring modules and classes

### 2. Function Index (`code-index/`)
- **Generated by**: `tools/devdocs/function_index/generate_function_index.py`
- **Content**: Function signatures, types, metadata
- **Features**: Multiple formats, coverage analysis
- **Best for**: Code analysis, quick function lookup

## Usage Guidelines

### For Contributors
- Generate API docs when adding new modules or major API changes
- Run function index to check documentation coverage
- Update this README when changing the documentation structure

### For Users
- Browse `api/` for detailed API reference with examples
- Use `code-index/` for quick function signature lookup
- Check `coverage.md` to see documentation status

## Troubleshooting

### Common Issues

**No modules found in pdoc3**
```bash
# Ensure sglang is installed from source
pip install -e ../python/
```

**Import errors during generation**
```bash
# Use --skip-errors flag
pdoc3 --html --output-dir dev/refs/api --skip-errors sglang
```

**Duplicate directories**
```bash
# Clean before regenerating
rm -rf dev/refs/api
pdoc3 --html --output-dir dev/refs/api --skip-errors sglang
```

**Function index errors**
```bash
# Check for syntax errors in source files
python3 -m py_compile python/sglang/srt/filename.py
```

## Maintenance

### Regular Tasks
1. **Regenerate API docs** after significant API changes
2. **Update function index** after adding new functions
3. **Check coverage reports** to identify undocumented code
4. **Clean old documentation** to prevent duplication

### Automation
- API docs are **not** automatically generated in CI
- Function index can be generated manually or in development workflow
- Main documentation (Sphinx) is automatically built and deployed

## Related Files
- `../API_DOCUMENTATION_WORKFLOW.md` - Complete workflow guide
- `../tools/devdocs/function_index/generate_function_index.py` - Function index generator
- `../conf.py` - Sphinx configuration
- `../Makefile` - Main documentation build system
